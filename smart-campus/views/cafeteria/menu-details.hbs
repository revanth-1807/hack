<div class="card">
    <div style="display: flex; gap: 2rem; margin-bottom: 2rem;">
        {{#if item.image}}
        <img src="/uploads/{{item.image}}" alt="{{item.name}}" style="width: 300px; height: 250px; object-fit: cover; border-radius: 8px;">
        {{else}}
        <div style="width: 300px; height: 250px; background: #f0f0f0; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
            <i class="fas fa-utensils" style="font-size: 4rem; color: #999;"></i>
        </div>
        {{/if}}
        
        <div style="flex: 1;">
            <h1>{{item.name}}</h1>
            <span class="badge badge-primary">{{item.category}}</span>
            
            <div style="margin: 1.5rem 0;">
                <h2 style="color: #28a745; font-size: 2rem;">₹{{item.price}}</h2>
                
                {{#if item.isAvailable}}
                <span class="badge badge-success">Available</span>
                {{else}}
                <span class="badge badge-secondary">Out of Stock</span>
                {{/if}}
            </div>

            <p style="font-size: 1.1rem; line-height: 1.6; color: #555;">{{item.description}}</p>

            {{#if item.ingredients.length}}
            <div style="margin-top: 1.5rem;">
                <h4>Ingredients:</h4>
                <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                    {{#each item.ingredients}}
                    <span class="badge badge-light">{{this}}</span>
                    {{/each}}
                </div>
            </div>
            {{/if}}

            {{#if item.isAvailable}}
            <div style="margin-top: 2rem;">
                <form action="/cafeteria/order" method="POST">
                    <input type="hidden" name="menuItemId" value="{{item._id}}">
                    
                    <div class="form-group" style="max-width: 200px;">
                        <label class="form-label">Quantity</label>
                        <input type="number" name="quantity" class="form-control" value="1" min="1" max="10" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Special Instructions (optional)</label>
                        <textarea name="specialInstructions" class="form-control" rows="2" placeholder="Any special requests..."></textarea>
                    </div>

                    <button type="submit" class="btn btn-primary btn-lg">
                        <i class="fas fa-cart-plus"></i> Add to Order - ₹{{item.price}}
                    </button>
                </form>
            </div>
            {{/if}}
        </div>
    </div>

    {{#if (eq user.role 'admin')}}
    <div class="card" style="background: #fff3cd; margin-top: 2rem;">
        <h3>Admin Actions</h3>
        <div style="display: flex; gap: 1rem;">
            <a href="/admin/cafe/menu/edit/{{item._id}}" class="btn btn-warning">
                <i class="fas fa-edit"></i> Edit Item
            </a>
            <form action="/admin/cafe/menu/delete/{{item._id}}" method="POST">
                <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this menu item?')">
                    <i class="fas fa-trash"></i> Delete
                </button>
            </form>
        </div>
    </div>
    {{/if}}

    <div style="margin-top: 2rem;">
        <a href="/cafeteria/menu" class="btn btn-secondary">
            <i class="fas fa-arrow-left"></i> Back to Menu
        </a>
        <a href="/cafeteria" class="btn btn-outline-primary">
            <i class="fas fa-home"></i> Cafeteria Home
        </a>
    </div>
</div>
